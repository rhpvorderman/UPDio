<tool id="updio" name="UPDio" version="1.1.0+galaxy3" python_template_version="3.5" profile="21.05">
    <requirements>
        <requirement type="package" version="1.1.0">updio</requirement>
        <container type="docker">quay.io/biowdl/updio:1.1.0</container>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
       #if str($input_type.input_type_selector) == "file"
         #from pathlib import Path
         #set $child_id = Path(str($input_type.child_id_file)).read_text().strip()
         #set $mother_id = Path(str($input_type.mother_id_file)).read_text().strip()
         #set $father_id = Path(str($input_type.father_id_file)).read_text().strip()
       #end if
       ln -s $multisample_vcf input.vcf.gz &&
        updio --multisample_vcf input.vcf.gz
        --childID $child_id
        --momID $mother_id
        --dadID $father_id &&
        mv output_dir/${child_id}.table ${updio_table} &&
        mv output_dir/${child_id}.upd ${updio_verdict}
    ]]></command>
    <inputs>
        <param name="multisample_vcf" type="data" format="vcf_bgzip"
           label="multisample VCF file" />
        <param name="output_label" type="text"
           label="Analysis name, to distinguish the output." />
        <conditional name="input_type">
            <param name="input_type_selector" type="select" label="Sample IDs submitted by:">
                <option value="text" selected="true">Text</option>
                <option value="file">Files (for easier workflow integration)</option>
            </param>
            <when value="text">
                <param name="child_id" type="text"
                       label="child sample ID in the VCF file" />
                <param name="mother_id" type="text"
                       label="Mother sample ID in the VCF file" />
                <param name="father_id" type="text"
                       label="Father sample ID in the VCF file" />
            </when>
            <when value="file">
                <param name="child_id_file" type="data"
                       label="Child sample ID in the VCF file. Provided as a single line file."/>
                <param name="mother_id_file" type="data"
                       label="Mother sample ID in the VCF file. Provided as a single line file."/>
                <param name="father_id_file" type="data"
                       label="Father sample ID in the VCF file. Provided as a single line file."/>
            </when>
        </conditional>
    </inputs>
    <outputs>
        <data format="tsv" name="updio_table" label="${tool.name} on ${output_label}: table"/>
        <data format="tsv" name="updio_verdict" label="${tool.name} on ${output_label}: verdict"/>
    </outputs>
    <help><![CDATA[
        UPDio is designed to detect UPD events in probands from vcf trio data.
    ]]></help>
</tool>